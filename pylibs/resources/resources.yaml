# yaml-language-server: $schema=https://taskfile.dev/schema.json
version: "3"

tasks:
  init:
    desc: "Initialize Resources Library"
    sources:
      - pyproject.toml
    generates:
      - poetry.lock
    cmds:
      - poetry install

  build:
    internal: true
    silent: true
    deps:
      - init
    desc: "Build Resources Library"
    cmds:
      - nx build resources --verbose
    sources:
      - resources/**/*.py

  update:
    desc: "Update Resources Library Dependencies"
    cmds:
      - nx update resources

  install:
    internal: true
    silent: true
    deps:
      - build
    desc: "Install Resources Library"
    cmds:
      - nx install resources --verbose
    sources:
      - resources/**/*.py
    generates:
      - "{{.XDG_BIN_HOME}}/resources"

  run:
    desc: "Run Resources Command"
    deps:
      - install
    cmds:
      - poetry run python -m resources {{.CLI_ARGS}}
